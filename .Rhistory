# check new offset
CTD_sal_corr <- rep(NA, 31)
corr_offset <- rep(NA, 31)
CTD_sal_corr1 <- rep(NA, 31)
corr_offset1 <- rep(NA, 31)
CTD_sal_corr2 <- rep(NA, 31)
corr_offset2 <- rep(NA, 31)
for (i in c(1:4, 6:7, 9:33)) {
k <- may_bottle$Station[i]
CTD_sal_corr1[i] <- mayCTD[mayCTD$Station == k, 6]
corr_offset1[i] <- CTD_sal_corr1[i] - bottle_sal[i]
CTD_sal_corr2[i] <- mayCTD[mayCTD$Station == k, 7]
corr_offset2[i] <- CTD_sal_corr2[i] - bottle_sal[i]
}
comparison <- as.data.frame(cbind(comparison, CTD_sal_corr1, corr_offset1, CTD_sal_corr2, corr_offset2))
CTD_sal_corr1
CTD_sal_corr2
corr_offset1 < corr_offset2
abs(corr_offset1) < abs(corr_offset2)
sum(abs(corr_offset1) < abs(corr_offset2))
sum(abs(corr_offset2) < abs(corr_offset1))
sum(TRUE, TRUE, FALSE)
sum(c(abs(corr_offset1) < abs(corr_offset2)))
abs(corr_offset1) < abs(corr_offset2)
as.vector(abs(corr_offset1) < abs(corr_offset2))
sum(as.vector(abs(corr_offset1) < abs(corr_offset2)))
abs(corr_offset1) < abs(corr_offset2)
abs(corr_offset2) < abs(corr_offset1)
sum(abs(corr_offset2) < abs(corr_offset1), na.rm = TRUE)
sum(abs(corr_offset1) < abs(corr_offset2), na.rm = TRUE)
sum(abs(corr_offset2) < abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset1))
mean(abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset2), na.rm = TRUE)
lm1 <- lm(CTD_sal ~ bottle_sal, comparison) # CTD = 0.9957(bottle) + 0.1626
summary(lm1)
lm2 <- lm(bottle_sal ~ CTD_sal, comparison) # bottle = 1.0037(CTD) - 0.1437
summary(lm2)
mayCTD$BottomSal_Corr1 <- (mayCTD$BottomSalinity - 0.162649) / 0.995709
mayCTD$BottomSal_Corr2 <- 1.003717 * mayCTD$BottomSalinity - 0.143717
# check new offset
CTD_sal_corr <- rep(NA, 31)
corr_offset <- rep(NA, 31)
CTD_sal_corr1 <- rep(NA, 31)
corr_offset1 <- rep(NA, 31)
CTD_sal_corr2 <- rep(NA, 31)
corr_offset2 <- rep(NA, 31)
for (i in c(1:4, 6:7, 9:33)) {
k <- may_bottle$Station[i]
CTD_sal_corr1[i] <- mayCTD[mayCTD$Station == k, 6]
corr_offset1[i] <- CTD_sal_corr1[i] - bottle_sal[i]
CTD_sal_corr2[i] <- mayCTD[mayCTD$Station == k, 7]
corr_offset2[i] <- CTD_sal_corr2[i] - bottle_sal[i]
}
comparison$CTD_sal_corr1 <- CTD_sal_corr1
comparison$corr_offset1 <- corr_offset1
comparison$CTD_sal_corr2 <- CTD_sal_corr2
comparison$corr_offset2 <- corr_offset2
sum(abs(corr_offset1) < abs(corr_offset2), na.rm = TRUE)
sum(abs(corr_offset2) < abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset2), na.rm = TRUE)
mayCTD$BottomSal_Corr1 <- (mayCTD$BottomSalinity - 0.1626) / 0.9957
mayCTD$BottomSal_Corr2 <- 1.0037 * mayCTD$BottomSalinity - 0.1437
# check new offset
CTD_sal_corr <- rep(NA, 31)
corr_offset <- rep(NA, 31)
CTD_sal_corr1 <- rep(NA, 31)
corr_offset1 <- rep(NA, 31)
CTD_sal_corr2 <- rep(NA, 31)
corr_offset2 <- rep(NA, 31)
for (i in c(1:4, 6:7, 9:33)) {
k <- may_bottle$Station[i]
CTD_sal_corr1[i] <- mayCTD[mayCTD$Station == k, 6]
corr_offset1[i] <- CTD_sal_corr1[i] - bottle_sal[i]
CTD_sal_corr2[i] <- mayCTD[mayCTD$Station == k, 7]
corr_offset2[i] <- CTD_sal_corr2[i] - bottle_sal[i]
}
comparison$CTD_sal_corr1 <- CTD_sal_corr1
comparison$corr_offset1 <- corr_offset1
comparison$CTD_sal_corr2 <- CTD_sal_corr2
comparison$corr_offset2 <- corr_offset2
sum(abs(corr_offset1) < abs(corr_offset2), na.rm = TRUE)
sum(abs(corr_offset2) < abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset1), na.rm = TRUE)
sd(abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset2), na.rm = TRUE)
sd(abs(corr_offset2), na.rm = TRUE)
mayCTD$BottomSal_Corr1 <- (mayCTD$BottomSalinity - 0.162649) / 0.995709
mayCTD$BottomSal_Corr2 <- 1.003717 * mayCTD$BottomSalinity - 0.143717
# check new offset
CTD_sal_corr <- rep(NA, 31)
corr_offset <- rep(NA, 31)
CTD_sal_corr1 <- rep(NA, 31)
corr_offset1 <- rep(NA, 31)
CTD_sal_corr2 <- rep(NA, 31)
corr_offset2 <- rep(NA, 31)
for (i in c(1:4, 6:7, 9:33)) {
k <- may_bottle$Station[i]
CTD_sal_corr1[i] <- mayCTD[mayCTD$Station == k, 6]
corr_offset1[i] <- CTD_sal_corr1[i] - bottle_sal[i]
CTD_sal_corr2[i] <- mayCTD[mayCTD$Station == k, 7]
corr_offset2[i] <- CTD_sal_corr2[i] - bottle_sal[i]
}
comparison$CTD_sal_corr1 <- CTD_sal_corr1
comparison$corr_offset1 <- corr_offset1
comparison$CTD_sal_corr2 <- CTD_sal_corr2
comparison$corr_offset2 <- corr_offset2
sum(abs(corr_offset1) < abs(corr_offset2), na.rm = TRUE)
sum(abs(corr_offset2) < abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset1), na.rm = TRUE)
sd(abs(corr_offset1), na.rm = TRUE)
mean(abs(corr_offset2), na.rm = TRUE)
sd(abs(corr_offset2), na.rm = TRUE)
comparison <- as.data.frame(cbind(station, bottle_sal, CTD_sal, offset))
mean(offset, na.rm = TRUE) # 0.02055761
median(offset, na.rm = TRUE) # 0.01950791
mayCTD$BottomSal_Corr <- 1.003717 * mayCTD$BottomSalinity - 0.143717
may_bottle <- read.csv("./data/salinity/may_salinity_bottle.csv")
mayCTD$BottomSal_Corr <- 1.003717 * mayCTD$BottomSalinity - 0.143717
mayCTD <- read.csv("./data/salinity/may_salinity_CTD.csv")
mayCTD$BottomSal_Corr <- 1.003717 * mayCTD$BottomSalinity - 0.143717
CTD_sal_corr <- rep(NA, 31)
corr_offset <- rep(NA, 31)
for (i in c(1:4, 6:7, 9:33)) {
k <- may_bottle$Station[i]
CTD_sal_corr[i] <- mayCTD[mayCTD$Station == k, 6]
corr_offset[i] <- CTD_sal_corr[i] - bottle_sal[i]
}
comparison <- as.data.frame(cbind(comparison, CTD_sal_corr, corr_offset))
View(comparison)
sd(abs(corr_offset), na.rm = TRUE)
mean(abs(corr_offset), na.rm = TRUE)
mean(corr_offset, na.rm = TRUE)
plot(comparison$bottle_sal ~ comparison$CTD_sal_corr)
abline(y = x)
abline(1, 0)
plot(comparison$bottle_sal ~ comparison$CTD_sal_corr)
abline(1, 0)
plot(comparison$bottle_sal ~ comparison$CTD_sal_corr)
plot(comparison$bottle_sal ~ comparison$CTD_sal_corr)
abline(0, 1)
plot(comparison$offset_corr ~ comparison$bottle_sal)
plot(comparison$corr_offset ~ comparison$bottle_sal)
abline(0, 0)
plot(comparison$corr_offset ~ comparison$bottle_sal)
abline(h = 0, lty = 2)
mayCTD$SurfaceSal_Corr <- 1.003717 * mayCTD$SurfaceSalinity - 0.143717
ggplot(data = comparison, aes(x = station, y = CTD_sal_corr)) +
geom_point() +
geom_point(aes(y = bottle_sal, col = "red")) +
ylim(30, 35) +
scale_color_discrete(labels = "bottle\nsample") +
theme_bw() +
theme(legend.title=element_blank())
View(may_bottle)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggmap)
GB_map <- get_map(c(-68.5247, 40.8155), maptype = "satellite", zoom = 7, source = "google")
register_google("AIzaSyBvvS_nvTml09h56OWd0Oniktayi0L8WDU")
GB_map <- get_map(c(-68.5247, 40.8155), maptype = "satellite", zoom = 7, source = "google")
GB_map
ggmap()
ggmap(GB_map)
ggmap(GB_map) +
coord_sf(crs = st_crs(4326)) +
xlim(c(-70.5, -66)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(40, 42.5))
ggmap(GB_map) +
xlim(c(-70.5, -66)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(40, 42.5))
ggmap(GB_map) +
xlim(c(-70, -67)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(40, 42.5))
ggmap(GB_map) +
xlim(c(-72, -65)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(40, 42.5))
ggmap(GB_map) +
xlim(c(-71, -65)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(40, 42.5))
ggmap(GB_map) +
xlim(c(-71, -65)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
ggmap(GB_map) +
xlim(c(-71, -65)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
ggmap(GB_map) +
xlim(c(-71, -65)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5)) +
theme_bw()
GB_map <- get_map(c(-68.5247, 40.8155), maptype = "satellite", zoom = 6, source = "google")
ggmap(GB_map) +
xlim(c(-71, -65)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
GB_map <- get_map(c(-68.5247, 40.8155), maptype = "satellite", zoom = 7, source = "google")
ggmap(GB_map) +
xlim(c(-71, -66.5)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
ggmap(GB_map) +
xlim(c(-71, -65.5)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
setwd("~/Desktop/Repos/ScallopRSA2021")
may <- read.csv("./data/MayScallopData_12-9-21.csv")
?table
table(may)
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "(.*)_"))
View(may)
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "(^.*)_"))
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "^.*(?=_)"))
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "^.{3}(?=_)"))
?aggregate
aggregate(may, by = Site, FUN = sum)
View(may)
?table
table(may$Site)
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "^.{3}(?=_)"))
# check number of scallops per site
table(may$Site)
ggplot(may, aes(x = Site, y = ShellHeight_mm)) +
geom_boxplot() +
theme_bw()
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
theme_bw()
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
theme_bw()
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "^.{3}(?=_)"))
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
theme_bw()
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "^.{3}(?=_)"))
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
theme_bw()
ggplot(may, aes(x = Site, y = ShellWt_g)) +
geom_boxplot() +
theme_bw()
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
labs(y = "Shell Height (mm)", main = "Shell Weights by Site") +
theme_bw()
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
labs(y = "Shell Height (mm)", title = "Shell Weights by Site") +
theme_bw()
ggplot(may, aes(x = Site, y = ShellWt_g)) +
geom_boxplot() +
labs(y = "Shell Weight (mm)", title = "Shell Weights by Site") +
theme_bw()
ggplot(may, aes(x = Site, y = ShellWt_g / ShellHt_mm)) +
geom_boxplot() +
theme_bw()
error_check <- may %>%
filter(Site == 017)
error_check <- may %>%
filter(Site == "017")
View(error_check)
error_check <- may %>%
filter(Site == "017") %>%
mutate(Ratio = ShellWt_g / ShellHt_mm)
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "^.{3}(?=_)"))
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
labs(y = "Shell Height (mm)", title = "Shell Heights by Site") +
theme_bw()
ggplot(may, aes(x = Site, y = ShellWt_g)) +
geom_boxplot() +
labs(y = "Shell Weight (mm)", title = "Shell Weights by Site") +
theme_bw()
ggplot(may, aes(x = Site, y = ShellWt_g / ShellHt_mm)) +
geom_boxplot() +
theme_bw()
error_check <- may %>%
filter(Site == "099") %>%
mutate(Ratio = ShellWt_g / ShellHt_mm)
ggplot(may, aes(x = Site, y = ShellWt_g / ShellHt_mm)) +
geom_boxplot() +
labs(y = "Ratio of Shell Weight to Shell Height (g/mm)", title = "\"Linear Density\" of Scallop Shells (Loose Proxy for Thickness)") +
theme_bw()
stations <- read.csv("./data/CruiseTrack_October.csv")
str(stations)
chd <- substr(stations$Lat, 3, 4)[1]
# convert latitude from DM to DD
Lat_split <- str_split_fixed(stations$Lat, chd, 2) %>%
as.data.frame()
Lat_split$V2 <- str_remove_all(Lat_split$V2, pattern = "'") %>%
as.numeric()
Lat_split$V2 <- Lat_split$V2/60
Lat_split$V1 <- as.numeric(Lat_split$V1)
stations$Lat <- Lat_split$V1 + Lat_split$V2
# convert longitude from DM to DD
Long_split <- str_split_fixed(stations$Long, chd, 2) %>%
as.data.frame()
Long_split$V2 <- str_remove_all(Long_split$V2, pattern = "'") %>%
as.numeric()
Long_split$V2 <- Long_split$V2/60
Long_split$V1 <- as.numeric(Long_split$V1)
stations$Long <- -(Long_split$V1 + Long_split$V2)
?st_crs
map <- ggmap(GB_map) +
coord_sf(crs = st_crs(4326)) +
xlim(c(-71, -65.5)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
library(ggmap)
library(sf)
map <- ggmap(GB_map) +
coord_sf(crs = st_crs(4326)) +
xlim(c(-71, -65.5)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
map
stations_SPDF <- SpatialPointsDataFrame(coords = stations[ , c("Long","Lat")],
data = stations[ ,c("Long", "Lat", "Station", "Tow")],
proj4string = CRS("+init=epsg:4326"))
?SpatialPointsDataFrame
library(sp)
stations_SPDF <- SpatialPointsDataFrame(coords = stations[ , c("Long","Lat")],
data = stations[ ,c("Long", "Lat", "Station", "Tow")],
proj4string = CRS("+init=epsg:4326"))
stations_sf <- st_as_sf(stations_SPDF)
stations_sf <- st_transform(stations_sf, crs = 4326)
View(stations_sf)
may_sites %>%
group_by(Site) %>%
summarize(ShellHt_mm = mean(ShellHt_mm), ShellWt_g = mean(ShellWt_g))
may_sites <- may %>%
group_by(Site) %>%
summarize(ShellHt_mm = mean(ShellHt_mm), ShellWt_g = mean(ShellWt_g))
View(may_sites)
?summarize
?mean
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE))
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) %>%
mutate(Site = str_remove(Site, "^0+")) # remove leading zeros on site numbers
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) %>%
mutate(Site = str_remove(Site, "^0+")) %>% # remove leading zeros on site numbers
rename(Station = Site)
stations <- join(stations, may_sites, by = Station, type = "right")
?join
library(tidyverse)
stations <- join(stations, may_sites, by = Station, type = "right")
library(plyr)
stations <- join(stations, may_sites, by = Station, type = "right")
stations <- join(stations, may_sites, by = "Station", type = "right")
View(stations)
stations <- read.csv("./data/CruiseTrack_October.csv")
str(stations)
chd <- substr(stations$Lat, 3, 4)[1]
# convert latitude from DM to DD
Lat_split <- str_split_fixed(stations$Lat, chd, 2) %>%
as.data.frame()
Lat_split$V2 <- str_remove_all(Lat_split$V2, pattern = "'") %>%
as.numeric()
Lat_split$V2 <- Lat_split$V2/60
Lat_split$V1 <- as.numeric(Lat_split$V1)
stations$Lat <- Lat_split$V1 + Lat_split$V2
# convert longitude from DM to DD
Long_split <- str_split_fixed(stations$Long, chd, 2) %>%
as.data.frame()
Long_split$V2 <- str_remove_all(Long_split$V2, pattern = "'") %>%
as.numeric()
Long_split$V2 <- Long_split$V2/60
Long_split$V1 <- as.numeric(Long_split$V1)
stations$Long <- -(Long_split$V1 + Long_split$V2)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) %>%
mutate(Site = str_remove(Site, "^0+")) %>% # remove leading zeros on site numbers
rename(Station = Site)
stations <- join(stations, may_sites, by = "Station", type = "right")
rm(may_sites)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) %>%
mutate(Site = str_remove(Site, "^0+")) %>% # remove leading zeros on site numbers
rename(Station = Site)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) %>%
mutate(Site = str_remove(Site, "^0+")) #%>% # remove leading zeros on site numbers
View(may)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) #%>%
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) #%>%
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) %>%
mutate(Site = str_remove(Site, "^0+")) %>% # remove leading zeros on site numbers
rename(Station = Site)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) %>%
mutate(Site = str_remove(Site, "^0+")) #%>% # remove leading zeros on site numbers
rm(may_sites)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) #%>%
View(may_sites)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
register_google(key = "AIzaSyBvvS_nvTml09h56OWd0Oniktayi0L8WDU")
# Chunk 2
library(tidyverse)
library(ggmap)
library(sf)
library(sp)
# Chunk 3
setwd("~/Desktop/Repos/ScallopRSA2021")
may <- read.csv("./data/MayScallopData_12-9-21.csv") %>%
mutate(Site = str_extract(ScallopID, "^.{3}(?=_)"))
# check number of scallops per site
table(may$Site)
# Chunk 4
ggplot(may, aes(x = Site, y = ShellHt_mm)) +
geom_boxplot() +
labs(y = "Shell Height (mm)", title = "Scallop Shell Heights by Site") +
theme_bw()
ggplot(may, aes(x = Site, y = ShellWt_g)) +
geom_boxplot() +
labs(y = "Shell Weight (g)", title = "Scallop Shell Weights by Site") +
theme_bw()
ggplot(may, aes(x = Site, y = ShellWt_g / ShellHt_mm)) +
geom_boxplot() +
labs(y = "Ratio of Shell Weight to Shell Height (g/mm)", title = "\"Linear Density\" of Scallop Shells (Loose Proxy for Thickness)") +
theme_bw()
# Chunk 5
GB_map <- get_map(c(-68.5247, 40.8155), maptype = "satellite", zoom = 7, source = "google")
map <- ggmap(GB_map) +
coord_sf(crs = st_crs(4326)) +
xlim(c(-71, -65.5)) +
scale_y_continuous(breaks = c(40, 41, 42), limits = c(39.5, 42.5))
map
# Chunk 6
stations <- read.csv("./data/CruiseTrack_October.csv")
str(stations)
chd <- substr(stations$Lat, 3, 4)[1]
# convert latitude from DM to DD
Lat_split <- str_split_fixed(stations$Lat, chd, 2) %>%
as.data.frame()
Lat_split$V2 <- str_remove_all(Lat_split$V2, pattern = "'") %>%
as.numeric()
Lat_split$V2 <- Lat_split$V2/60
Lat_split$V1 <- as.numeric(Lat_split$V1)
stations$Lat <- Lat_split$V1 + Lat_split$V2
# convert longitude from DM to DD
Long_split <- str_split_fixed(stations$Long, chd, 2) %>%
as.data.frame()
Long_split$V2 <- str_remove_all(Long_split$V2, pattern = "'") %>%
as.numeric()
Long_split$V2 <- Long_split$V2/60
Long_split$V1 <- as.numeric(Long_split$V1)
stations$Long <- -(Long_split$V1 + Long_split$V2)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) %>%
mutate(LinDensity = ShellWt_g / ShellHt_mm) #%>%
may$Site
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE)) #%>%
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE))
may_sites <- may %>%
group_by(Site) %>%
summarise(sum(ShellHt_mm))
# check number of scallops per site
table(may$Site)
may_sites <- may %>%
group_by(Site) %>%
summarise(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE))
View(may_sites)
may$Site
mayBySite <- may %>%
group_by(Site) %>%
summarize(ShellHt_mm = mean(ShellHt_mm, na.rm = TRUE), ShellWt_g = mean(ShellWt_g, na.rm = TRUE))
mayBySite <- may %>%
rename(Station = Site)
View(may)
may <- may %>%
rename(Station = Site)
